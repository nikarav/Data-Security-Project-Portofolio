# Data Security - *Project Portofolio*

A collection of all the projects analyzed during the course DTU course 02239: Data Security.

## Team
|  Name | Email  | 
|---|---|
|  Adamantios Alexandros Kounis | s202789@dtu.dk  |
|  Christos Grigoriou |  s202518@dtu.dk |
|  Nikolaos Karavasilis | s213685@dtu.dk  |
|Joachim Morken |s202074@dtu.dk|


---
Table of Contents
-----------------
* [Protocol Security Lab](#Protocol-Security-Lab)
* [Authentication Lab](#Authentication-Lab)
* [Access Control Lab](#Access-Control-Lab)

## Protocol Security Lab
The lab exercises use the protocol analyzer OFMC: http://imm.dtu.dk/~samo/ofmc-2020.zip

There is also a GUI for OFMC:  https://github.com/ulfur88/OFMC-GUI/releases/tag/v1.2.1

### Exercise 1
**Kerberos** is a protocol for authentication in distributed systems. A user first authenticates itself to an authentication server, e.g. using a password. The authentication server replies with a ticket and the client can then get access to other services with that ticket.

A ticket has typically a form like $\{\mid C, A, S, K, T, \ldots\}_{k A S}$ where
- *$C$ is the client to whom the ticket is issued*
- *$A$ is the issueing server (this can be ath or $g$ in Kerberos)*
- *$S$ is the server that will accept the ticket (this can be $g$ or $s$ in Kerberos)*
- *$K$ is a fresh symmetric key for communication between $C$ and $s$*
- *$T$ is a timestamp (the ticket may be valid only for a few minutes)*
- *Further, the ticket may contain a description of the services/resources the ticket gives access to*
- *The ticket is encrypted with $k A S$ which is a long-term symmetric key shared between $A$ and $S$*

There is a variant **PKInit-Kerberos** where the client uses public key cryptography (instead of a password) to authenticate itself to the authentication server. The formalization is found in PKINIT.AnB, located in the project's directory(specified below). This represents an early version that has an attack. For simplicity there is also a shorter version of the protocol in PKINIT-short.AnB that contains only those steps that are relevant for the attack. We use the simplified version for question 2 and $3 .$
1. *Describe the protocol from the AnB specification: which of the messages can the client $C$ decrypt, which keys does $C$ ever learn? How does the protocol prevent illegitimate access? Note: this question needs to be answered for the full version PKINIT. AnB!*
2. *Explain the attack that is found by OFMC, find a fix for it, and verify the fixed protocol with OFMC. Hint: you do not need to introduce new cryptographic constructs, just somewhere a message has too few information. For this exercise, you must not change initial knowledge and goals.*
    3. *Design a variant of PKInit where the key Ktemp is not generated by ath but is obtained from a Diffie-Hellman key-exchange. Verify your variant with OFMC. For this, you need to add the public Diffie-Hellman group to the initial knowledge of all participants and adapt the goals.*

### Exercise 2

1. *Consider the example call-home, located in the project directory. Try to describe the protocol in your own wordsâ€”what does it try to achieve, how does it work?*
2. *Analyze the protocol with OFMC and explain the attack: what does the intruder do, what went wrong?*
3. *How can one fix the protocol by only changing messages in the Action part? Hint: only make changes to the message from home to $B$.*
4. *After fixing the protocol, suppose now $p w(A, s)$ is not a strong cryptographic key, but a poorly chosen password. For that matter, uncomment the currently commented-out goal*
    ```
            pw (A, home) guessable secret between A, home
    ```
    *Explain the attack that OFMC finds on this goal and explain what is the problem.*
5. *Let us consider the password to be strong again (comment out the guessing goal again). Note that the party home is a fixed honest (trustworthy) server. Let us replace home by Home, i.e., a normal role that can be instantiated by the intruder. Why does the protocol have an attack then?*

---

## Authentication Lab

---
## Access Control Lab